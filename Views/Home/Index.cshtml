@model ASPNETapp2.Models.ListOfOrders
@{
    ViewBag.Title = "Zamówienia";

}
<h2>Lista zamówień</h2>
<br />
<div id="box">
    <p id="label">Wyświetl zamówienia według kryterium:</p>
    <form id="chooseTable" method="post" action="/Home/DisplayOrders">
        <select class="form-control" id="chosenTable" name="chosenTable">
            <option selected disabled hidden value="">-- Wybierz kryterium --</option>
            <option id="all" value="all">Wyświetl wszystkie zamówienia</option>
            <optgroup label="Status zamówienia">
                <option id="paid" value="billpaid">Zapłacono za zamówienie</option>
                <option id="pending" value="pendingpayment">Oczekiwanie na zapłatę</option>
            </optgroup>
            <optgroup label="Nazwa stolika">
                <option id="stolik1" value="1">Niebieski</option>
                <option id="stolik2" value="2">Zielony</option>
                <option id="stolik3" value="3">Czerwony</option>
                <option id="stolik4" value="4">Żółty</option>
                <option id="stolik5" value="5">Fioletowy</option>
            </optgroup>
        </select>
        <input type="submit" class="btn btn-primary" value="Wyświetl zamówienia" />
    </form>
</div>
<br />

@if (Model.OrdersList == null)
{
    if ((string)TempData["error"] != null)
    {
        <h4>@TempData["error"].ToString()</h4>
    }
    else
    {
    }

}
else
{
    <hr />
    <table class="table">
        <thead>
            <tr>
            </tr>
        </thead>
        <tbody>
            @for (int i = 0; i < Model.OrdersList.Count; i++)
            {
                <tr>
                    <td colspan="4" id="greyRow">Id zamówienia: @Model.OrdersList[i].OrderId</td>
                </tr>
                <tr>
                    <th>Nazwa dania</th>
                    <th>Cena jednostkowa</th>
                    <th>Ilość</th>
                    <th>Cena całkowita</th>
                </tr>
                for (int j = 0; j < Model.OrdersList[i].OrderItems.Count; j++)
                {

                    <tr>
                        <td>@Model.OrdersList[i].OrderItems[j].Meal.MealName</td>
                        <td>@Model.OrdersList[i].OrderItems[j].Meal.MealUnitPrice PLN</td>
                        <td>@Model.OrdersList[i].OrderItems[j].Quantity</td>
                        <td>@Model.OrdersList[i].OrderItems[j].ListPositionPrice PLN</td>
                    </tr>
                }
                <tr>
                    <td colspan="4" id="blueRow">Cena zamówienia: @Model.OrdersList[i].TotalPrice PLN</td>
                </tr>
                <tr>
                    <td colspan="4"><hr /></td>
                </tr>

            }
        </tbody>
    </table>
}
